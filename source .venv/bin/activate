<!doctype html>
<html lang="en" data-theme="dark">
<head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>Budget Sniffer — Spend Insights </title> <meta name="description" content="Upload bank exports, auto-categorise with rules, and see spend insights for the last 12 months."> <link rel="stylesheet" href="/static/css/styles.css?v={{ app_version }}"> <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>/* Budget Sniffer RH Rules sidebar (scoped, non-invasive) */ .bsr-layout{display:grid;grid-template-columns:1fr 320px;gap:16px;align-items:start} .bsr-main{min-width:0} .bsr-sidebar{position:sticky;top:12px;max-height:calc(100vh - 24px);overflow:auto;border-left:1px solid rgba(255,255,255,0.1);padding-left:12px} .bsr-card{border:1px solid rgba(255,255,255,0.12);border-radius:10px;padding:12px;margin-bottom:12px;background:rgba(0,0,0,0.15);backdrop-filter:blur(2px)} .bsr-card h3{margin:0 0 8px 0;font-size:1rem} .bsr-rule{display:grid;grid-template-columns:auto 1fr;gap:6px 8px;padding:8px;border-radius:8px;border:1px dashed rgba(255,255,255,0.12);margin-bottom:8px} .bsr-badge{display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid rgba(255,255,255,0.2);font-size:11px} .bsr-muted{opacity:.7} .bsr-on{border-color:rgba(0,200,0,0.35)} .bsr-off{border-color:rgba(200,0,0,0.35);opacity:.6}</style>
</head>
<body> <div class="bsr-layout"> <main class="bsr-main" id="app-main"> <header> <h1>Budget Sniffer </h1>
<div id="repo-ref" style="font-size:12px;opacity:.75;margin:8px 0 16px;">Repo: <a href="https://github.com/KreativZentrum/budget_sniffer" target="_blank" rel="noopener">github.com/KreativZentrum/budget_sniffer</a></div> <p class="subtitle">Dark Mode • Upload files → auto-categorise → insights (default last 12 months)</p> </header> <section class="controls"> <form id="uploadForm" enctype="multipart/form-data"> <label class="btn">Select files <input type="file" name="files" id="fileInput" multiple> </label> <button type="submit" class="btn primary">Upload & Refresh</button> <button type="button" id="reloadRules" class="btn">Reload Rules</button> <span class="health" id="healthBadge">checking…</span> </form> <div class="filters"> <label>Start <input type="date" id="startDate"></label> <label>End <input type="date" id="endDate"></label> <label>Category <select id="categoryFilter"> <option value="">All</option> </select> </label> <button id="applyFilters" class="btn">Apply</button> <button id="toggleRec" class="btn">Recommendations ▼</button> </div> <div class="transfer-controls"> <button id="hideAllTransfers" class="btn">Hide All Transfers</button> <button id="unhideAllTransfers" class="btn">Unhide All Transfers</button> <label> <input type="checkbox" id="showHidden"> Show Hidden Transactions </label> </div> <div id="recPanel" class="panel" style="display:none;"> <p><strong>Suggestions:</strong> Analytics ignore Income/Transfer. Edit categories inline in the table below.</p> </div> <div id="warning" class="warning" style="display:none;"></div> <div id="debug" class="debug" style="display:none;"></div> </section> <main class="grid"> <div class="card"> <h3>Spend by Category (Income/Transfers excluded)</h3> <canvas id="donutChart"></canvas> <div class="legend" id="donutLegend"></div> </div> <div class="card"> <h3>Weekly Spend (Income/Transfers excluded)</h3> <canvas id="weeklyChart"></canvas> <div class="stats" id="weeklyStats"></div> </div> <div class="card"> <h3>Weekly Spend Distribution</h3> <canvas id="histChart"></canvas> </div> <div class="card">
    <h3>Spend by Super-Category</h3>
    <canvas id="superCatChart"></canvas>
    <div class="stats" id="superCatStats"></div>
  </div> <div class="card wide"> <h3>Transactions <span id="txSubtitle"></span></h3> <table id="txTable"> <thead><tr><th>Date</th><th>Description</th><th class="num">Amount</th><th>Account</th><th>Category</th><th>Actions</th></tr></thead> <tbody></tbody> </table> </div> </main> <footer> <p>How to use: upload your CSV/XLS exports, then adjust date/category filters. Click a donut slice to filter the table. Logs: <code>/logs/app.log</code>.</p> </footer> <script src="/static/js/app.js?v={{ app_version }}" defer></script> </main> <aside class="bsr-sidebar" id="rules-sidebar" aria-label="Rules"> <div class="bsr-card"> <h3>Rules Engine</h3> <div class="bsr-muted" id="rules-summary">Loading…</div> </div> <div class="bsr-card"> <h3>Current Rules</h3> <div id="rules-list" aria-live="polite"></div> </div> </aside> </div> <script src="{{ url_for('static', filename='js/rules_panel.js') }}"></script> <script defer src="{{ url_for('static', filename='js/doughnut_tooltips.js') }}"></script> <script defer src="{{ url_for('static', filename='js/categories_fill.js') }}"></script>
</body>
</html>